<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="member-mapper">
	<insert id="insertMembers">
		insert into member values
		(mem_seq.nextval, #{mPwd}, #{mName}, #{mGender}, #{mBirthDay}, #{mPhone}, #{mEmail}, #{mAddress}, sysdate, null, default, default, null, null)
	</insert>
	
	<select id="loginMember" resultMap="memberResultSet">
		select * 
			from member
				join Job using(j_code)
        		join department using(d_code)
			where M_NO = #{mNo}  
				and m_status ='Y'
				and m_admin in(1,0)
	</select>
	
	<resultMap type="Member" id="memberResultSet">
		<id column="M_NO" property="mNo"/>
		<result column="M_PWD" property="mPwd"/>
		<result column="M_NAME" property="mName"/>
		<result column="M_GENDER" property="mGender"/>
		<result column="M_BIRTHDAY" property="mBirthDay"/>
		<result column="M_PHONE" property="mPhone"/>
		<result column="M_EMAIL" property="mEmail"/>
		<result column="M_ADDRESS" property="mAddress"/>
		<result column="M_ENT_DATE" property="mEntDate"/>
		<result column="M_HIRE_DATE" property="mHireDate"/>
		<result column="M_STATUS" property="mStatus"/>
		<result column="M_ADMIN" property="mAdmin"/>
		<result column="J_CODE" property="jCode"/>
		<result column="D_CODE" property="dCode"/>
	</resultMap>
	
	<select id="selectMno" resultMap="memberResultSet">
		select * 
		from member
		where m_name= #{mName}
		and m_phone = #{mPhone}
	</select>
</mapper>
